==121698== Helgrind, a thread error detector
==121698== Copyright (C) 2007-2017, and GNU GPL'd, by OpenWorks LLP et al.
==121698== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==121698== Command: ./test_comm
==121698== Parent PID: 112673
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #3 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #3: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #4 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #4: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #5 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #2 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D650: std::thread::thread<void* (&)(void*), void*>(void* (&)(void*), void*&&) (thread:126)
==121698==    by 0x18CBEB: main (test_comm.cc:98)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698==  Lock at 0x419500 was first observed
==121698==    at 0x4C3603C: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x18E44E: __gthread_mutex_lock(pthread_mutex_t*) (gthr-default.h:748)
==121698==    by 0x18EF19: std::mutex::lock() (std_mutex.h:103)
==121698==    by 0x18F1D3: std::lock_guard<std::mutex>::lock_guard(std::mutex&) (std_mutex.h:162)
==121698==    by 0x18EA35: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:139)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==  Location 0x419500 is 0 bytes inside global var "admin_mtx"
==121698==  declared at spdk_mock.cc:15
==121698== 
==121698== Possible data race during read of size 8 at 0x4194E8 by thread #5
==121698== Locks held: 1, at address 0x419500
==121698==    at 0x18F3EF: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::emplace_back<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:98)
==121698==    by 0x18EA50: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:140)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== This conflicts with a previous write of size 8 by thread #2
==121698== Locks held: none
==121698==    at 0x190674: std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::_M_erase_at_end(spdk_cmd_cb*) (stl_vector.h:1519)
==121698==    by 0x18F71F: std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::clear() (stl_vector.h:1248)
==121698==    by 0x18EC74: spdk_nvme_ctrlr_process_admin_completions (spdk_mock.cc:171)
==121698==    by 0x19435F: comm_polling_admin_completions (channel.c:321)
==121698==    by 0x1959E8: polling_thread_process_cq_queue (session.c:391)
==121698==    by 0x196569: comm_session_polling_thread (session.c:722)
==121698==    by 0x18DAA0: void* std::__invoke_impl<void*, void* (*)(void*), void*>(std::__invoke_other, void* (*&&)(void*), void*&&) (invoke.h:60)
==121698==    by 0x18D59A: std::__invoke_result<void* (*)(void*), void*>::type std::__invoke<void* (*)(void*), void*>(void* (*&&)(void*), void*&&) (invoke.h:96)
==121698==  Location 0x4194e8 is 8 bytes inside global var "qpair_admin_cmds"
==121698==  declared at spdk_mock.cc:14
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698==  Lock at 0x419500 was first observed
==121698==    at 0x4C3603C: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x18E44E: __gthread_mutex_lock(pthread_mutex_t*) (gthr-default.h:748)
==121698==    by 0x18EF19: std::mutex::lock() (std_mutex.h:103)
==121698==    by 0x18F1D3: std::lock_guard<std::mutex>::lock_guard(std::mutex&) (std_mutex.h:162)
==121698==    by 0x18EA35: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:139)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==  Location 0x419500 is 0 bytes inside global var "admin_mtx"
==121698==  declared at spdk_mock.cc:15
==121698== 
==121698== Possible data race during write of size 8 at 0x5DA6AD0 by thread #5
==121698== Locks held: 1, at address 0x419500
==121698==    at 0x18EF6A: spdk_cmd_cb::spdk_cmd_cb(unsigned short, void (*)(void*, spdk_nvme_cpl const*), void*) (spdk_mock.h:19)
==121698==    by 0x191344: void __gnu_cxx::new_allocator<spdk_cmd_cb>::construct<spdk_cmd_cb, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(spdk_cmd_cb*, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (new_allocator.h:136)
==121698==    by 0x190106: void std::allocator_traits<std::allocator<spdk_cmd_cb> >::construct<spdk_cmd_cb, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(std::allocator<spdk_cmd_cb>&, spdk_cmd_cb*, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (alloc_traits.h:475)
==121698==    by 0x18F446: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::emplace_back<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:100)
==121698==    by 0x18EA50: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:140)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698== 
==121698== This conflicts with a previous read of size 8 by thread #2
==121698== Locks held: none
==121698==    at 0x18EC2B: spdk_nvme_ctrlr_process_admin_completions (spdk_mock.cc:166)
==121698==    by 0x19435F: comm_polling_admin_completions (channel.c:321)
==121698==    by 0x1959E8: polling_thread_process_cq_queue (session.c:391)
==121698==    by 0x196569: comm_session_polling_thread (session.c:722)
==121698==    by 0x18DAA0: void* std::__invoke_impl<void*, void* (*)(void*), void*>(std::__invoke_other, void* (*&&)(void*), void*&&) (invoke.h:60)
==121698==    by 0x18D59A: std::__invoke_result<void* (*)(void*), void*>::type std::__invoke<void* (*)(void*), void*>(void* (*&&)(void*), void*&&) (invoke.h:96)
==121698==    by 0x18E28E: decltype (__invoke((_S_declval<0ul>)(), (_S_declval<1ul>)())) std::thread::_Invoker<std::tuple<void* (*)(void*), void*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) (thread:234)
==121698==    by 0x18E1E9: std::thread::_Invoker<std::tuple<void* (*)(void*), void*> >::operator()() (thread:243)
==121698==  Address 0x5da6ad0 is 0 bytes inside a block of size 48 alloc'd
==121698==    at 0x4C3359F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x19296A: __gnu_cxx::new_allocator<spdk_cmd_cb>::allocate(unsigned long, void const*) (new_allocator.h:111)
==121698==    by 0x191F95: std::allocator_traits<std::allocator<spdk_cmd_cb> >::allocate(std::allocator<spdk_cmd_cb>&, unsigned long) (alloc_traits.h:436)
==121698==    by 0x19111F: std::_Vector_base<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::_M_allocate(unsigned long) (stl_vector.h:172)
==121698==    by 0x190195: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::_M_realloc_insert<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(__gnu_cxx::__normal_iterator<spdk_cmd_cb*, std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> > >, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:406)
==121698==    by 0x18F4AD: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::emplace_back<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:105)
==121698==    by 0x18EA50: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:140)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==  Block was alloc'd by thread #4
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698==  Lock at 0x419500 was first observed
==121698==    at 0x4C3603C: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x18E44E: __gthread_mutex_lock(pthread_mutex_t*) (gthr-default.h:748)
==121698==    by 0x18EF19: std::mutex::lock() (std_mutex.h:103)
==121698==    by 0x18F1D3: std::lock_guard<std::mutex>::lock_guard(std::mutex&) (std_mutex.h:162)
==121698==    by 0x18EA35: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:139)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==  Location 0x419500 is 0 bytes inside global var "admin_mtx"
==121698==  declared at spdk_mock.cc:15
==121698== 
==121698== Possible data race during write of size 8 at 0x5DA6AD8 by thread #5
==121698== Locks held: 1, at address 0x419500
==121698==    at 0x18EF75: spdk_cmd_cb::spdk_cmd_cb(unsigned short, void (*)(void*, spdk_nvme_cpl const*), void*) (spdk_mock.h:19)
==121698==    by 0x191344: void __gnu_cxx::new_allocator<spdk_cmd_cb>::construct<spdk_cmd_cb, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(spdk_cmd_cb*, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (new_allocator.h:136)
==121698==    by 0x190106: void std::allocator_traits<std::allocator<spdk_cmd_cb> >::construct<spdk_cmd_cb, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(std::allocator<spdk_cmd_cb>&, spdk_cmd_cb*, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (alloc_traits.h:475)
==121698==    by 0x18F446: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::emplace_back<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:100)
==121698==    by 0x18EA50: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:140)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698== 
==121698== This conflicts with a previous read of size 8 by thread #2
==121698== Locks held: none
==121698==    at 0x18EC32: spdk_nvme_ctrlr_process_admin_completions (spdk_mock.cc:166)
==121698==    by 0x19435F: comm_polling_admin_completions (channel.c:321)
==121698==    by 0x1959E8: polling_thread_process_cq_queue (session.c:391)
==121698==    by 0x196569: comm_session_polling_thread (session.c:722)
==121698==    by 0x18DAA0: void* std::__invoke_impl<void*, void* (*)(void*), void*>(std::__invoke_other, void* (*&&)(void*), void*&&) (invoke.h:60)
==121698==    by 0x18D59A: std::__invoke_result<void* (*)(void*), void*>::type std::__invoke<void* (*)(void*), void*>(void* (*&&)(void*), void*&&) (invoke.h:96)
==121698==    by 0x18E28E: decltype (__invoke((_S_declval<0ul>)(), (_S_declval<1ul>)())) std::thread::_Invoker<std::tuple<void* (*)(void*), void*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) (thread:234)
==121698==    by 0x18E1E9: std::thread::_Invoker<std::tuple<void* (*)(void*), void*> >::operator()() (thread:243)
==121698==  Address 0x5da6ad8 is 8 bytes inside a block of size 48 alloc'd
==121698==    at 0x4C3359F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x19296A: __gnu_cxx::new_allocator<spdk_cmd_cb>::allocate(unsigned long, void const*) (new_allocator.h:111)
==121698==    by 0x191F95: std::allocator_traits<std::allocator<spdk_cmd_cb> >::allocate(std::allocator<spdk_cmd_cb>&, unsigned long) (alloc_traits.h:436)
==121698==    by 0x19111F: std::_Vector_base<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::_M_allocate(unsigned long) (stl_vector.h:172)
==121698==    by 0x190195: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::_M_realloc_insert<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(__gnu_cxx::__normal_iterator<spdk_cmd_cb*, std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> > >, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:406)
==121698==    by 0x18F4AD: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::emplace_back<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:105)
==121698==    by 0x18EA50: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:140)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==  Block was alloc'd by thread #4
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698==  Lock at 0x419500 was first observed
==121698==    at 0x4C3603C: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x18E44E: __gthread_mutex_lock(pthread_mutex_t*) (gthr-default.h:748)
==121698==    by 0x18EF19: std::mutex::lock() (std_mutex.h:103)
==121698==    by 0x18F1D3: std::lock_guard<std::mutex>::lock_guard(std::mutex&) (std_mutex.h:162)
==121698==    by 0x18EA35: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:139)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==  Location 0x419500 is 0 bytes inside global var "admin_mtx"
==121698==  declared at spdk_mock.cc:15
==121698== 
==121698== Possible data race during write of size 2 at 0x5DA6AE0 by thread #5
==121698== Locks held: 1, at address 0x419500
==121698==    at 0x18EF81: spdk_cmd_cb::spdk_cmd_cb(unsigned short, void (*)(void*, spdk_nvme_cpl const*), void*) (spdk_mock.h:19)
==121698==    by 0x191344: void __gnu_cxx::new_allocator<spdk_cmd_cb>::construct<spdk_cmd_cb, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(spdk_cmd_cb*, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (new_allocator.h:136)
==121698==    by 0x190106: void std::allocator_traits<std::allocator<spdk_cmd_cb> >::construct<spdk_cmd_cb, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(std::allocator<spdk_cmd_cb>&, spdk_cmd_cb*, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (alloc_traits.h:475)
==121698==    by 0x18F446: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::emplace_back<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:100)
==121698==    by 0x18EA50: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:140)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698== 
==121698== This conflicts with a previous read of size 2 by thread #2
==121698== Locks held: none
==121698==    at 0x18EC46: spdk_nvme_ctrlr_process_admin_completions (spdk_mock.cc:168)
==121698==    by 0x19435F: comm_polling_admin_completions (channel.c:321)
==121698==    by 0x1959E8: polling_thread_process_cq_queue (session.c:391)
==121698==    by 0x196569: comm_session_polling_thread (session.c:722)
==121698==    by 0x18DAA0: void* std::__invoke_impl<void*, void* (*)(void*), void*>(std::__invoke_other, void* (*&&)(void*), void*&&) (invoke.h:60)
==121698==    by 0x18D59A: std::__invoke_result<void* (*)(void*), void*>::type std::__invoke<void* (*)(void*), void*>(void* (*&&)(void*), void*&&) (invoke.h:96)
==121698==    by 0x18E28E: decltype (__invoke((_S_declval<0ul>)(), (_S_declval<1ul>)())) std::thread::_Invoker<std::tuple<void* (*)(void*), void*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) (thread:234)
==121698==    by 0x18E1E9: std::thread::_Invoker<std::tuple<void* (*)(void*), void*> >::operator()() (thread:243)
==121698==  Address 0x5da6ae0 is 16 bytes inside a block of size 48 alloc'd
==121698==    at 0x4C3359F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x19296A: __gnu_cxx::new_allocator<spdk_cmd_cb>::allocate(unsigned long, void const*) (new_allocator.h:111)
==121698==    by 0x191F95: std::allocator_traits<std::allocator<spdk_cmd_cb> >::allocate(std::allocator<spdk_cmd_cb>&, unsigned long) (alloc_traits.h:436)
==121698==    by 0x19111F: std::_Vector_base<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::_M_allocate(unsigned long) (stl_vector.h:172)
==121698==    by 0x190195: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::_M_realloc_insert<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(__gnu_cxx::__normal_iterator<spdk_cmd_cb*, std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> > >, unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:406)
==121698==    by 0x18F4AD: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::emplace_back<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:105)
==121698==    by 0x18EA50: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:140)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==  Block was alloc'd by thread #4
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698==  Lock at 0x419500 was first observed
==121698==    at 0x4C3603C: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x18E44E: __gthread_mutex_lock(pthread_mutex_t*) (gthr-default.h:748)
==121698==    by 0x18EF19: std::mutex::lock() (std_mutex.h:103)
==121698==    by 0x18F1D3: std::lock_guard<std::mutex>::lock_guard(std::mutex&) (std_mutex.h:162)
==121698==    by 0x18EA35: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:139)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==  Location 0x419500 is 0 bytes inside global var "admin_mtx"
==121698==  declared at spdk_mock.cc:15
==121698== 
==121698== Possible data race during write of size 8 at 0x4194E8 by thread #5
==121698== Locks held: 1, at address 0x419500
==121698==    at 0x18F457: void std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::emplace_back<unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&>(unsigned short&, void (*&)(void*, spdk_nvme_cpl const*), void*&) (vector.tcc:102)
==121698==    by 0x18EA50: spdk_nvme_ctrlr_cmd_admin_raw (spdk_mock.cc:140)
==121698==    by 0x19428E: comm_send_raw_cmd (channel.c:294)
==121698==    by 0x1949EA: comm_submit_raw_sync_cmd (comm_api.c:111)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== This conflicts with a previous write of size 8 by thread #2
==121698== Locks held: none
==121698==    at 0x190674: std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::_M_erase_at_end(spdk_cmd_cb*) (stl_vector.h:1519)
==121698==    by 0x18F71F: std::vector<spdk_cmd_cb, std::allocator<spdk_cmd_cb> >::clear() (stl_vector.h:1248)
==121698==    by 0x18EC74: spdk_nvme_ctrlr_process_admin_completions (spdk_mock.cc:171)
==121698==    by 0x19435F: comm_polling_admin_completions (channel.c:321)
==121698==    by 0x1959E8: polling_thread_process_cq_queue (session.c:391)
==121698==    by 0x196569: comm_session_polling_thread (session.c:722)
==121698==    by 0x18DAA0: void* std::__invoke_impl<void*, void* (*)(void*), void*>(std::__invoke_other, void* (*&&)(void*), void*&&) (invoke.h:60)
==121698==    by 0x18D59A: std::__invoke_result<void* (*)(void*), void*>::type std::__invoke<void* (*)(void*), void*>(void* (*&&)(void*), void*&&) (invoke.h:96)
==121698==  Location 0x4194e8 is 8 bytes inside global var "qpair_admin_cmds"
==121698==  declared at spdk_mock.cc:14
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #5: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #2: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x1957B5: polling_thread_process_cplt_cmd (session.c:337)
==121698==    by 0x195E2A: polling_thread_process_tid_queue (session.c:517)
==121698==    by 0x196578: comm_session_polling_thread (session.c:723)
==121698==    by 0x18DAA0: void* std::__invoke_impl<void*, void* (*)(void*), void*>(std::__invoke_other, void* (*&&)(void*), void*&&) (invoke.h:60)
==121698==    by 0x18D59A: std::__invoke_result<void* (*)(void*), void*>::type std::__invoke<void* (*)(void*), void*>(void* (*&&)(void*), void*&&) (invoke.h:96)
==121698==    by 0x18E28E: decltype (__invoke((_S_declval<0ul>)(), (_S_declval<1ul>)())) std::thread::_Invoker<std::tuple<void* (*)(void*), void*> >::_M_invoke<0ul, 1ul>(std::_Index_tuple<0ul, 1ul>) (thread:234)
==121698==    by 0x18E1E9: std::thread::_Invoker<std::tuple<void* (*)(void*), void*> >::operator()() (thread:243)
==121698==    by 0x18E121: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void* (*)(void*), void*> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #1 is the program's root thread
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Possible data race during write of size 1 at 0x5DA6090 by thread #3
==121698== Locks held: none
==121698==    at 0x4C3E56C: mempcpy (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5A2D933: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1258)
==121698==    by 0x59FEFBA: vfprintf (vfprintf.c:1643)
==121698==    by 0x5A06E13: fprintf (fprintf.c:32)
==121698==    by 0x18C8DF: sync_raw_long_cmd_test() (test_comm.cc:65)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== This conflicts with a previous write of size 1 by thread #4
==121698== Locks held: none
==121698==    at 0x4C3E56C: mempcpy (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5A2D933: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1258)
==121698==    by 0x59FEFBA: vfprintf (vfprintf.c:1643)
==121698==    by 0x5A06E13: fprintf (fprintf.c:32)
==121698==    by 0x18C8DF: sync_raw_long_cmd_test() (test_comm.cc:65)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==  Address 0x5da6090 is 0 bytes inside a block of size 1,024 alloc'd
==121698==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5A2013B: _IO_file_doallocate (filedoalloc.c:101)
==121698==    by 0x5A30328: _IO_doallocbuf (genops.c:365)
==121698==    by 0x5A2F447: _IO_file_overflow@@GLIBC_2.2.5 (fileops.c:759)
==121698==    by 0x5A2D98C: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1266)
==121698==    by 0x59FD503: vfprintf (vfprintf.c:1328)
==121698==    by 0x5A06EE5: printf (printf.c:33)
==121698==    by 0x1AB58B: testing::internal::ColoredPrintf(testing::internal::(anonymous namespace)::GTestColor, char const*, ...) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AB819: testing::internal::PrettyUnitTestResultPrinter::OnTestIterationStart(testing::UnitTest const&, int) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AD3D5: testing::internal::TestEventRepeater::OnTestIterationStart(testing::UnitTest const&, int) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9CA4: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1D45F8: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==  Block was alloc'd by thread #1
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Possible data race during write of size 1 at 0x5DA6098 by thread #3
==121698== Locks held: none
==121698==    at 0x4C3E546: mempcpy (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5A2D933: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1258)
==121698==    by 0x59FD979: vfprintf (vfprintf.c:1674)
==121698==    by 0x5A06E13: fprintf (fprintf.c:32)
==121698==    by 0x18C8DF: sync_raw_long_cmd_test() (test_comm.cc:65)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== This conflicts with a previous write of size 1 by thread #4
==121698== Locks held: none
==121698==    at 0x4C3E546: mempcpy (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5A2D933: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1258)
==121698==    by 0x59FD979: vfprintf (vfprintf.c:1674)
==121698==    by 0x5A06E13: fprintf (fprintf.c:32)
==121698==    by 0x18C8DF: sync_raw_long_cmd_test() (test_comm.cc:65)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==  Address 0x5da6098 is 8 bytes inside a block of size 1,024 alloc'd
==121698==    at 0x4C32F2F: malloc (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5A2013B: _IO_file_doallocate (filedoalloc.c:101)
==121698==    by 0x5A30328: _IO_doallocbuf (genops.c:365)
==121698==    by 0x5A2F447: _IO_file_overflow@@GLIBC_2.2.5 (fileops.c:759)
==121698==    by 0x5A2D98C: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1266)
==121698==    by 0x59FD503: vfprintf (vfprintf.c:1328)
==121698==    by 0x5A06EE5: printf (printf.c:33)
==121698==    by 0x1AB58B: testing::internal::ColoredPrintf(testing::internal::(anonymous namespace)::GTestColor, char const*, ...) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AB819: testing::internal::PrettyUnitTestResultPrinter::OnTestIterationStart(testing::UnitTest const&, int) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AD3D5: testing::internal::TestEventRepeater::OnTestIterationStart(testing::UnitTest const&, int) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9CA4: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1D45F8: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==  Block was alloc'd by thread #1
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #6 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #6: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #7 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #7: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #8 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #8: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #9 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #9: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #10 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #10: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #11 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #11: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #12 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #12: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #13 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #13: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #14 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #14: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #15 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #15: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #16 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #16: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #17 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #17: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== ---Thread-Announcement------------------------------------------
==121698== 
==121698== Thread #18 was created
==121698==    at 0x5AC360E: clone (clone.S:71)
==121698==    by 0x4E4BEC4: create_thread (createthread.c:100)
==121698==    by 0x4E4BEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==121698==    by 0x4C38A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x5120994: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x18D4DE: std::thread::thread<void (&)()>(void (&)()) (thread:126)
==121698==    by 0x18C9DF: comm_test_sync_raw_long_cmd_multi_thread_Test::TestBody() (test_comm.cc:82)
==121698==    by 0x1D3385: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1CC46A: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1A95EB: testing::Test::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA056: testing::TestInfo::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1AA941: testing::TestSuite::Run() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698==    by 0x1B9E77: testing::internal::UnitTestImpl::RunAllTests() (in /home/pzy/my_programs/HSCFS/build/test/communication/test_comm)
==121698== 
==121698== ----------------------------------------------------------------
==121698== 
==121698== Thread #18: pthread_cond_{signal,broadcast}: dubious: associated lock is not held by any thread
==121698==    at 0x4C368F4: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698==    by 0x194CE6: cond_broadcast (hscfs_multithread.h:77)
==121698==    by 0x19538A: comm_session_submit_cmd_ctx (session.c:192)
==121698==    by 0x194A37: comm_submit_raw_sync_cmd (comm_api.c:117)
==121698==    by 0x18C87F: sync_raw_long_cmd_test() (test_comm.cc:63)
==121698==    by 0x18D7A4: void std::__invoke_impl<void, void (*)()>(std::__invoke_other, void (*&&)()) (invoke.h:60)
==121698==    by 0x18D440: std::__invoke_result<void (*)()>::type std::__invoke<void (*)()>(void (*&&)()) (invoke.h:95)
==121698==    by 0x18E2BD: decltype (__invoke((_S_declval<0ul>)())) std::thread::_Invoker<std::tuple<void (*)()> >::_M_invoke<0ul>(std::_Index_tuple<0ul>) (thread:234)
==121698==    by 0x18E22F: std::thread::_Invoker<std::tuple<void (*)()> >::operator()() (thread:243)
==121698==    by 0x18E141: std::thread::_State_impl<std::thread::_Invoker<std::tuple<void (*)()> > >::_M_run() (thread:186)
==121698==    by 0x51206DE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==121698==    by 0x4C38C26: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==121698== 
==121698== 
==121698== For counts of detected and suppressed errors, rerun with: -v
==121698== Use --history-level=approx or =none to gain increased speed, at
==121698== the cost of reduced accuracy of conflicting-access information
==121698== ERROR SUMMARY: 177 errors from 24 contexts (suppressed: 754 from 80)
